
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AI on Power - Level 3 course">
      
      
        <meta name="author" content="Deepak C Shetty, Learning Content Developer, IBM Power">
      
      
      
        <link rel="prev" href="../lab1-overview/">
      
      
        <link rel="next" href="../../Lab2/lab2-overview/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Hands-on guide - AI on Power - Level 3</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploy-an-llm-on-power10-hands-on-lab-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AI on Power - Level 3" class="md-header__button md-logo" aria-label="AI on Power - Level 3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AI on Power - Level 3
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hands-on guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AI on Power - Level 3" class="md-nav__button md-logo" aria-label="AI on Power - Level 3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AI on Power - Level 3
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helpful-tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pre-req/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prerequisites
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lab-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab setup instructions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lab 1 - Deploy a LLM on Power10
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Lab 1 - Deploy a LLM on Power10
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab1-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab education
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Hands-on guide
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Hands-on guide
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-ready-check" class="md-nav__link">
    <span class="md-ellipsis">
      Lab-ready check
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Lab guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lab guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-project" class="md-nav__link">
    <span class="md-ellipsis">
      Create a project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Setup storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-configmap" class="md-nav__link">
    <span class="md-ellipsis">
      Setup ConfigMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-first-model" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy first model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-second-model" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy second model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lab 2 - Deploy RAG on Power10
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Lab 2 - Deploy RAG on Power10
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab2/lab2-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab education
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab2/lab2-hands-on-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hands-on guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lab 3 - Deploy code LLM on Power10
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Lab 3 - Deploy code LLM on Power10
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab3/lab3-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab education
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab3/lab3-hands-on-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hands-on guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional resources
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../credits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credits
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../print_page/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Print Course
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-ready-check" class="md-nav__link">
    <span class="md-ellipsis">
      Lab-ready check
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Lab guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lab guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-project" class="md-nav__link">
    <span class="md-ellipsis">
      Create a project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Setup storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-configmap" class="md-nav__link">
    <span class="md-ellipsis">
      Setup ConfigMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-first-model" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy first model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-second-model" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy second model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div><h1 id="deploy-an-llm-on-power10-hands-on-lab-guide">Deploy an LLM on Power10 - Hands-on lab guide<a class="headerlink" href="#deploy-an-llm-on-power10-hands-on-lab-guide" title="Permanent link">¶</a></h1>
<h2 id="lab-ready-check">Lab-ready check<a class="headerlink" href="#lab-ready-check" title="Permanent link">¶</a></h2>
<p>Make sure that you have the following items ready:</p>
<ul>
<li>In your browser, you are logged in as <code>cecuser</code> within the Red Hat OpenShift console.</li>
<li>In your terminal, you are logged in to the bastion server and authenticated to the Red Hat OpenShift cluster by using the Red Hat OpenShift CLI <code>oc</code>.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Proceed only once the items mentioned earlier are ready. Refer to "Lab setup instructions" section (see left side menu) to setup your browser and terminal windows.</p>
</div>
<h2 id="lab-guide">Lab guide<a class="headerlink" href="#lab-guide" title="Permanent link">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Image zoom functionality</p>
<p>Click the images in the following lab guide to view them in a larger format.</p>
</div>
<h3 id="create-a-project">Create a project<a class="headerlink" href="#create-a-project" title="Permanent link">¶</a></h3>
<ol>
<li>
<p>Navigate to the Red Hat OpenShift Administrator profile. Click <strong>Home</strong> <strong>(A)</strong> -&gt; <strong>Projects</strong> <strong>(B)</strong> and click <strong>Create Project</strong> <strong>(C)</strong>.
   <a class="glightbox" href="https://github.com/user-attachments/assets/87c5fec4-e76d-4ca3-9845-77d25b8c7d46" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/87c5fec4-e76d-4ca3-9845-77d25b8c7d46"></a></p>
</li>
<li>
<p>Enter a project name: <strong>lab1-demo</strong> <strong>(A)</strong> and click <strong>Create</strong> <strong>(B)</strong>.
   <a class="glightbox" href="https://github.com/user-attachments/assets/6d1b6e5d-3cf6-4c3b-811a-6bd40a7a715e" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/6d1b6e5d-3cf6-4c3b-811a-6bd40a7a715e"></a></p>
</li>
</ol>
<h3 id="setup-storage">Setup storage<a class="headerlink" href="#setup-storage" title="Permanent link">¶</a></h3>
<p>Setup storage for this lab which is needed for storing the downloaded AI models. This environment comes with NFS (file storage) pre-configured. 
In Red Hat OpenShift, you first request for the storage (also known as PersistentVolumeClaim or PVC) and the actual storage (also known as PersistentVolume or PV) gets allotted based on your request and the storage availability in the storage pool (NFS in this case).</p>
<ol>
<li>Navigate to the Red Hat OpenShift Administrator profile. Click <strong>Storage</strong> <strong>(A)</strong> -&gt; <strong>PersistentVolumeClaims</strong> <strong>(B)</strong> and click <strong>Create PersistentVolumeClaim</strong> <strong>(C)</strong>.
   <a class="glightbox" href="https://github.com/user-attachments/assets/23b17459-0bd3-4abd-8cd2-4bfd572efa0f" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/23b17459-0bd3-4abd-8cd2-4bfd572efa0f"></a></li>
<li>In the resulting form, enter the PVC name: <strong>model-storage</strong> <strong>(A)</strong> and Size: <strong>20</strong> <strong>(B)</strong> GB. Leave other fields as defaults and click <strong>Create</strong> <strong>(C)</strong>.
   <a class="glightbox" href="https://github.com/user-attachments/assets/98571147-31a2-4e37-a063-c2d1c3929a64" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/98571147-31a2-4e37-a063-c2d1c3929a64"></a></li>
<li>It shows PVC status as bound, which means storage was allotted.
   <a class="glightbox" href="https://github.com/user-attachments/assets/ea19ae1f-899d-4ff5-a5e0-f97df1e97ea2" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/ea19ae1f-899d-4ff5-a5e0-f97df1e97ea2"></a></li>
<li>
<p>Navigate to <strong>Storage</strong> <strong>(A)</strong> -&gt; <strong>PersistentVolumes</strong> <strong>(B)</strong> and view the actual storage (PV) bound to your storage request (PVC = <strong>model-storage</strong> <strong>(C)</strong>).
   <a class="glightbox" href="https://github.com/user-attachments/assets/4209536d-a21a-42d0-b847-cc6ad15cd64d" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/4209536d-a21a-42d0-b847-cc6ad15cd64d"></a></p>
<p>The storage setup is now complete.</p>
</li>
</ol>
<h3 id="setup-configmap">Setup ConfigMap<a class="headerlink" href="#setup-configmap" title="Permanent link">¶</a></h3>
<p>In Red Hat OpenShift, a ConfigMap is an object that is used to manage configuration data for applications. It helps to decouple configuration details from application logic, which makes your applications more portable and easier to manage across different environments. Instead of hardcoding configuration values in your application, you store them in a ConfigMap and inject them into your application at run time.</p>
<p>ConfigMap is used to store the model URL and model name, both of which are required during model deployment. Using ConfigMap allows for easy switching to a different model.</p>
<ol>
<li>
<p>Navigate to <strong>Workloads</strong> <strong>(A)</strong> -&gt; <strong>ConfigMaps</strong> <strong>(B)</strong> and select <strong>lab1-demo</strong> <strong>(C)</strong> as the active Project.
   <a class="glightbox" href="https://github.com/user-attachments/assets/4b0f77a2-f5f5-4821-a073-bbc67ded39cf" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/4b0f77a2-f5f5-4821-a073-bbc67ded39cf"></a></p>
</li>
<li>
<p>Click <strong>Create ConfigMap</strong> <strong>(A)</strong>.
   <a class="glightbox" href="https://github.com/user-attachments/assets/793a95ad-953a-49d9-8cec-8c7e321947cd" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/793a95ad-953a-49d9-8cec-8c7e321947cd"></a></p>
</li>
<li>
<p>In the resulting form, make sure the <strong>Form view</strong> <strong>(A)</strong> option is selected.
   <a class="glightbox" href="https://github.com/user-attachments/assets/f0c6b9e0-f60d-4b92-b3c5-45252351e539" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/f0c6b9e0-f60d-4b92-b3c5-45252351e539"></a></p>
</li>
<li>
<p>Enter a name: <strong>model-params</strong> <strong>(A)</strong>, and fill the Key and Value fields as below:</p>
<ul>
<li>
<p><strong>Key</strong>: <code>MODEL_NAME</code> <strong>(B)</strong></p>
</li>
<li>
<p><strong>Value</strong>: <code>tinyllama-1.1b-chat-v1.0.Q8_0.gguf</code> <strong>(C)</strong></p>
</li>
</ul>
<p>Click <strong>Add key/value</strong> <strong>(D)</strong> which opens up one more Key/Value box.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/be119bf2-f37d-45f8-b9df-c8d4d7045e63" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/be119bf2-f37d-45f8-b9df-c8d4d7045e63"></a></p>
</li>
<li>
<p>In the newly created Key/Value box, enter the values as below:</p>
<ul>
<li>
<p><strong>Key</strong>: <code>MODEL_URL</code> <strong>(A)</strong></p>
</li>
<li>
<p><strong>Value</strong>: <code>https://huggingface.co/TheBloke/TinyLlama-1.1B-Chat-v1.0-GGUF/resolve/main/tinyllama-1.1b-chat-v1.0.Q8_0.gguf</code> <strong>(B)</strong></p>
</li>
</ul>
<p>Click <strong>Create</strong> <strong>(C)</strong>.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/5abc809b-0f3b-4356-9429-2d5159a561e7" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/5abc809b-0f3b-4356-9429-2d5159a561e7"></a></p>
<p>The ConfigMap setup is now complete.</p>
</li>
</ol>
<h3 id="deploy-first-model">Deploy first model<a class="headerlink" href="#deploy-first-model" title="Permanent link">¶</a></h3>
<ol start="2">
<li>
<p>Navigate to the Red Hat OpenShift Developer profile console window.</p>
<ul>
<li><strong>Note</strong>: If you followed the TIP given in the "Lab setup instructions" page, you already have a browser window/tab with the Developer profile. In case you didn't, go to the upper left section of your console, click <strong>Administrator</strong> and select <strong>Developer</strong>.</li>
</ul>
</li>
<li>
<p><strong>IMP</strong>: Make sure that you are in the <strong>lab1-demo</strong> project in the Developer profile window. If not, goto <strong>Project</strong> and select <strong>lab1-demo</strong>.</p>
<p><div class="video-container"><video style="position:relative;width:100%;height:22.172vw" controls alt="type:video"><source src="../_attachments/switch-to-lab1-demo-project.mp4" type="video/mp4"></source></video></div></p>
</li>
<li>
<p>Click <strong>+Add</strong> <strong>(A)</strong> and select <strong>Import YAML</strong> <strong>(B)</strong> option.
   <a class="glightbox" href="https://github.com/user-attachments/assets/72e28c16-590c-4acd-9c29-5dc91bc031d7" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/72e28c16-590c-4acd-9c29-5dc91bc031d7"></a></p>
</li>
<li>
<p>In the resulting window, copy and paste the following deployment YAML into it and click <strong>Create</strong> <strong>(A)</strong>.
   </p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="w"> </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w"> </span><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">   </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab1-demo</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w"> </span><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">   </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">   </span><span class="nt">selector</span><span class="p">:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">     </span><span class="nt">matchLabels</span><span class="p">:</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">       </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab1-demo</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">   </span><span class="nt">template</span><span class="p">:</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">     </span><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">       </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">         </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab1-demo</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">     </span><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">       </span><span class="nt">initContainers</span><span class="p">:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fetch-model-data</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">           </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubi8</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">           </span><span class="nt">volumeMounts</span><span class="p">:</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">llama-models</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">               </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/models</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">           </span><span class="nt">command</span><span class="p">:</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sh</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">'-c'</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">               </span><span class="no">if [ ! -f /models/$MODEL_NAME ] ; then</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">                 </span><span class="no">curl -L $MODEL_URL --output /models/$MODEL_NAME</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">               </span><span class="no">else</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">                 </span><span class="no">echo "model /models/$MODEL_NAME already present"</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">               </span><span class="no">fi</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="w">               </span><span class="no">rm -f /models/mymodel</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">               </span><span class="no">ln -sf /models/$MODEL_NAME /models/mymodel</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">           </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="w">       </span><span class="nt">containers</span><span class="p">:</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">llama-cpp</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">           </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/daniel_casali/llama.cpp-mma:sep2024</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="w">           </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">"-m"</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">"/models/mymodel"</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">"-c"</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">"4096"</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">"--host"</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">"0.0.0.0"</span><span class="p p-Indicator">]</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="w">           </span><span class="nt">ports</span><span class="p">:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="w">               </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">           </span><span class="nt">volumeMounts</span><span class="p">:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">llama-models</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="w">               </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/models</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="w">       </span><span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">llama-models</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="w">           </span><span class="nt">persistentVolumeClaim</span><span class="p">:</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">             </span><span class="nt">claimName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">model-storage</span>
</code></pre></div></td></tr></table></div>
    <a class="glightbox" href="https://github.com/user-attachments/assets/35195937-4df3-4263-9d4a-755b9bd67fce" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/35195937-4df3-4263-9d4a-755b9bd67fce"></a>
</li>
<li>
<p>A quick explanation of the deployment YAML follows.</p>
<details class="info">
<summary>Deployment YAML explanation</summary>
<ul>
<li><strong>Line 2</strong> says its a deployment YAML  </li>
<li><strong>Line 4</strong> shows the name of this deployment resource (<code>lab-demo</code>)         </li>
<li><strong>Lines 7-9</strong>: Defines the label selector to match Pods with the "app: lab1-demo" label         </li>
<li><strong>Lines 11-13</strong>: Specifies the labels that the Pods have.  </li>
<li><code>spec</code> section starting on <strong>Line 14</strong> contains the pod specification. This deployment has 1 pod which contains 2 containers.   <ul>
<li><strong>initContainer</strong> named <code>fetch-model-data</code> (<strong>Lines 15-32</strong>) which fetches the model from HF and saves it in the underlying storage. The shell script embedded under the <code>command</code> section makes sure that the model is downloaded only if it is not already present. <code>volumeMounts</code> section (<strong>Lines 18-20</strong>) has the name of the volume <code>llama-models</code> this container uses for disk storage and the path where the storage is mounted. This initContainer container uses the standard RHEL8 UBI (Universal Base Image) image and exits after the model is downloaded.</li>
<li><strong>Container</strong> named <code>llama-cpp</code> (<strong>Lines 33-42</strong>) which is the main workload container that serves the LLM. This container uses the docker image <code>quay.io/daniel_casali/llama.cpp-mma:sep2024</code> which is a custom-built image for ppc64le architecture with MMA optimized libraries. This image provides a runtime environment based on the open source <a href="https://github.com/ggerganov/llama.cpp" target="_blank">llama.cpp</a> project which enables LLM inference with minimal setup and state-of-the-art performance on a wide variety of hardware.<ul>
<li>You may ask... What's the need for a model runtime?                   <ul>
<li>A model runtime serves as the infrastructure needed to deploy, manage, and run these models in production.                      </li>
<li>It helps manage system resources such as CPU, GPU, memory, and network resources that are critical for deploying models.                     </li>
<li>Advanced runtimes may include optimizations for specific hardware, including accelerators like TPUs or MMAs (Matrix Math Accelerators), for faster computation.                      </li>
<li>It allows models to be scaled for real-world applications, particularly in cloud or distributed computing environments.                      </li>
<li>It enables handling multiple requests simultaneously while keeping latency low, which is vital in production systems.                      </li>
</ul>
</li>
<li>By facilitating the efficient execution and management of machine learning models, runtimes are essential for operationalizing AI and machine learning solutions in production.   </li>
</ul>
</li>
<li><strong>NOTE</strong>: Container <code>llama-cpp</code> uses the same storage volume <code>llama-models</code> as container <code>initContainer</code> for underlying storage and hence can access the models that are downloaded by container <code>initContainer</code>. <strong>Lines 43-46</strong> specifies the PVC (Persistent Volume Claim) <code>model-storage</code> used as the source of storage for the volume. Recall that this PVC was created at the beginning of this lab!</li>
</ul>
</li>
</ul>
</details>
</li>
<li>
<p>You are now in the Deployment details window. Click <strong>Pods</strong> <strong>(A)</strong> tab and you see the Pod erring out. This behavior is expected as the YAML references MODEL_URL and MODEL_NAME environment variables which aren’t supplied yet! These environment variables aren’t in the ConfigMap, and will be injected in the next step.
   <a class="glightbox" href="https://github.com/user-attachments/assets/d6032ff5-03ba-4c2f-b733-ffb8a83fdf30" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/d6032ff5-03ba-4c2f-b733-ffb8a83fdf30"></a></p>
</li>
<li>
<p>Navigate to <strong>Environment</strong> <strong>(A)</strong> tab, select <strong>fetch-model-data</strong> <strong>(B)</strong> container and select <strong>model-params</strong> <strong>(C)</strong> ConfigMap and click <strong>Save</strong> <strong>(D)</strong>.
    <a class="glightbox" href="https://github.com/user-attachments/assets/ef491f57-4908-427d-bf8b-c7e4a20c5a4e" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/ef491f57-4908-427d-bf8b-c7e4a20c5a4e"></a></p>
<div class="admonition info">
<p class="admonition-title">About LLama and tinyLLama models</p>
<p>The ConfigMap currently points to the tinyLLaMa model. Meta (formerly Facebook) developed the LLaMA (Large Language Model Meta AI) model, a family of state-of-the-art large language models, which are designed to perform various natural language processing tasks. TinyLLaMA is a compact variant of the LLaMA (Large Language Model Meta AI) model, which is designed for efficiency and accessibility, especially when deployed in smaller environments. Available in Hugging Face (HF), it focuses on reducing the size of large-scale language models while retaining strong performance across various natural language processing tasks.</p>
</div>
</li>
<li>
<p>Switch back to the <strong>Pods</strong> <strong>(A)</strong> tab and observe that a new pod is started by Red Hat OpenShift, as the pod's environment was modified when the ConfigMap was added.
    <a class="glightbox" href="https://github.com/user-attachments/assets/74c8a1f9-fa9d-42b8-a26b-f8ea873d1116" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/74c8a1f9-fa9d-42b8-a26b-f8ea873d1116"></a></p>
</li>
<li>
<p>The new pod downloads the model and then starts it. Since the configmap points to a tinyllama model, it is downloaded from HuggingFace and then started. When that happens the pod's status changes to Running.</p>
<div class="admonition info">
<p class="admonition-title">Model download takes time</p>
<p>This process takes a few minutes (in this case, it took around 1 to 1.5 minutes) and your results might vary. Remember, this is a demo environment and the models are a few GBs in size. Models that are once downloaded are not downloaded again if you are using the same storage (PV).</p>
</div>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/06801c61-7ec4-46c6-b5d7-1f9f4af660dc" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/06801c61-7ec4-46c6-b5d7-1f9f4af660dc"></a></p>
<p>** Well done!** The LLM is successfully deployed on Power10.</p>
</li>
<li>
<p>Verify that the model running is indeed tinyllama! Click the pod name <strong>(A)</strong> to enter the pod details view/page.
    <a class="glightbox" href="https://github.com/user-attachments/assets/5a6e4078-9047-4d2f-ab84-942f938b46b7" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/5a6e4078-9047-4d2f-ab84-942f938b46b7"></a></p>
</li>
<li>In the pod details page, click the <strong>Logs</strong> <strong>(A)</strong> tab to see the pod logs.
    <a class="glightbox" href="https://github.com/user-attachments/assets/c7bb75d5-6768-45fa-b51f-37fef4132218" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/c7bb75d5-6768-45fa-b51f-37fef4132218"></a></li>
<li>
<p>In the log window, scroll upwards to see the name of the model against the attribute <strong>llm_load_print_meta: general.name</strong>.
    <a class="glightbox" href="https://github.com/user-attachments/assets/89536022-644a-497c-9225-9a08d68de52a" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/89536022-644a-497c-9225-9a08d68de52a"></a></p>
<p>This confirms that tinyllama is successfully deployed.</p>
</li>
<li>
<p>The next step is to access the model and interact with it. In Red Hat OpenShift, you need to create a service and a route which generates the cluster internal and publicly accessible HTTP endpoints, respectively. To do that, navigate to the Red Hat OpenShift Administrator profile and click <strong>Networking</strong> <strong>(A)</strong> -&gt; <strong>Services</strong> <strong>(B)</strong> and click <strong>Create Service</strong> <strong>(C)</strong>.</p>
<div class="admonition note">
<p>If you are switching browser window/tab, make sure that you are in the <strong>lab1-demo</strong> project in the new window/tab.</p>
</div>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/a4f691e2-f597-42c8-951f-6872d02d7713" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/a4f691e2-f597-42c8-951f-6872d02d7713"></a></p>
</li>
<li>
<p>In the resulting Create Service YAML window, select all, and delete everything. Then copy the following service YAML, paste it in the YAML window and click <strong>Create</strong> <strong>(A)</strong>.
    </p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"lab1-service"</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="s">"lab1-service"</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">"ClusterIP"</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab1-port</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="s">"lab1-demo"</span>
</code></pre></div></td></tr></table></div>
    <a class="glightbox" href="https://github.com/user-attachments/assets/c53a1eaf-57c7-4fcd-8148-b0ab9fba77e4" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/c53a1eaf-57c7-4fcd-8148-b0ab9fba77e4"></a>
</li>
<li>
<p>A brief explanation of the Service YAML is provided below.</p>
<details class="info">
<summary>Service YAML explanation</summary>
<ul>
<li>
<p><strong>Line 2</strong> shows that it is a service YAML</p>
</li>
<li>
<p><strong>Line 4</strong> shows the name of the service (<code>lab1-service</code>)</p>
</li>
<li>
<p><strong>Line 8</strong> shows that the type of this service is <code>ClusterIP</code>. ClusterIP is the default service type that is used to expose a set of Pods internally within the cluster. It creates a virtual IP (ClusterIP) for the service, which other services or Pods within the same Kubernetes cluster can use to access it.</p>
</li>
<li>
<p><strong>Lines 9-13</strong> has the port details. <code>port: 8080</code> refers to the port for the incoming traffic of the service. <code>targetPort: 8080</code> refers to the port on the pod. This means that incoming traffic for the service on port 8080 is forwarded to the pod on port 8080.</p>
</li>
<li>
<p><strong>Lines 14-15</strong> specifies the pod selector label. It defines which Pods the service routes traffic to. In this case, it matches Pods that have the label <code>app: lab1-demo</code>, which is the label that was assigned in the deployment YAML.</p>
</li>
</ul>
</details>
</li>
<li>
<p>You are in service details view/page. You can see the ClusterIP which is accessible from inside the cluster only.
    <a class="glightbox" href="https://github.com/user-attachments/assets/5b8b3385-44a7-4dec-bbfa-f384c5f784fb" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/5b8b3385-44a7-4dec-bbfa-f384c5f784fb"></a></p>
</li>
<li>
<p>Navigate to <strong>Networking</strong> <strong>(A)</strong> -&gt; <strong>Routes</strong> <strong>(B)</strong> and click <strong>Create Route</strong> <strong>(C)</strong>.
      <a class="glightbox" href="https://github.com/user-attachments/assets/4bf9bb4f-b017-43fe-ae12-99db103d001f" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/4bf9bb4f-b017-43fe-ae12-99db103d001f"></a></p>
</li>
<li>
<p>In the resulting Create Route window, select <strong>YAML view</strong> <strong>(A)</strong> and clear everything from the YAML window. Copy the below YAML and paste it in the YAML window and click <strong>Create</strong> <strong>(B)</strong>.
    </p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Route</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">route.openshift.io/v1</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab1-route</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab1-route</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">  </span><span class="nt">to</span><span class="p">:</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab1-service</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">  </span><span class="nt">tls</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">  </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab1-port</span>
</code></pre></div></td></tr></table></div>
    <a class="glightbox" href="https://github.com/user-attachments/assets/9f313dfd-c1a3-4ec7-8ebe-b1e2595b8ae6" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/9f313dfd-c1a3-4ec7-8ebe-b1e2595b8ae6"></a>
</li>
<li>
<p>A brief explanation of the Route YAML is being provided here. In Red Hat OpenShift, a Route exposes a service to external clients by mapping an external URL to an internal Red Hat OpenShift service.</p>
<details class="info">
<summary>Route YAML explanation</summary>
<ul>
<li>
<p><strong>Line 1</strong>: This line defines the creation of a Red Hat OpenShift Route resource.</p>
</li>
<li>
<p><strong>Lines 3-6</strong>: The <code>name</code> field defines the name of the route (<code>lab1-route</code>), and the <code>labels</code> field associates labels with the route, which can be used for tracking or organizing the route in Red Hat OpenShift.</p>
</li>
<li>
<p><strong>Lines 7-10</strong>: The <code>to</code> field under <code>spec</code> defines the target resource for the route. In this case, it targets a Service that is named <code>lab1-service</code>, which is already defined and exposes Pods internally by using ClusterIP resource.</p>
</li>
<li>
<p><strong>Line 11</strong>: TLS is set to <code>null</code>, which means that SSL/TLS encryption that is not configured for this route. For secure routes (HTTPS), you'd configure this to specify certificates and encryption protocols.</p>
</li>
<li>
<p><strong>Lines 12-13</strong>: The <code>targetPort</code> field under <code>port</code> specifies which port on the service (or Pods) the route will forward requests to. In this case, it refers to <code>lab1-port</code>, which was defined as port 8080 in our service configuration.</p>
</li>
</ul>
</details>
</li>
<li>
<p>You are in the route details view. The URL mentioned under <strong>Location</strong> is the externally accessible URL of your application (which hosts the tinyllama LLM).
    <a class="glightbox" href="https://github.com/user-attachments/assets/abfcc310-985e-4208-9e56-d2f39e4f2c13" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/abfcc310-985e-4208-9e56-d2f39e4f2c13"></a></p>
</li>
<li>
<p>Click the external URL in the route details view to access your model. A new browser window/tab where you are able to interact with your newly deployed LLM. You see a screen like this:      </p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/2237409c-7160-471f-aafa-f0e1254c5a53" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/2237409c-7160-471f-aafa-f0e1254c5a53"></a></p>
</li>
<li>
<p>Scroll all the way down to the input field "Say something..." where you can interact with the LLM. You can ask any question that you like, but keep in mind you're using a small model and many more powerful models out there are available for general conversation.
    <a class="glightbox" href="https://github.com/user-attachments/assets/82196cf5-d4c2-459d-af7e-c24650f1f6ce" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/82196cf5-d4c2-459d-af7e-c24650f1f6ce"></a></p>
<div class="admonition note">
<p class="admonition-title">Experimenting with model parameters</p>
<p>You can see numerous model parameters or tunables (for example: Predictions, Temperature, and so on). Visit the model-specific documentation and learn about them and experiment with it. You can try changing some parameters, ask the same question and check how the response changes. These parameters are not covered in this lab as it is outside the scope of the lab.</p>
</div>
</li>
<li>
<p>Presented below are the questions and their corresponding responses.</p>
<div class="admonition warning">
<p class="admonition-title">Accuracy of LLM responses</p>
<ul>
<li>Large language models (LLMs) are trained on vast amounts of text data, but that training is limited to a <strong>specific cutoff date</strong>. It means that the model can only answer questions based on the information available up to that point in time. It cannot access real-time data or understand events, trends, or new information that occurred after the cutoff date. Therefore, the knowledge on which they were trained limits their ability to provide accurate answers.</li>
<li>AI-generated content varies and does not always provide consistent answers. Your response might be different.</li>
</ul>
</div>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/c0c4b3ca-dbc6-4f9f-8d29-115c11486843" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/c0c4b3ca-dbc6-4f9f-8d29-115c11486843"></a></p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/c9fde420-3c8c-40bc-a48c-0ece97fc2248" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/c9fde420-3c8c-40bc-a48c-0ece97fc2248"></a></p>
<p><strong>Well done!</strong>, you successfully deployed an LLM model and provisioned a public-facing API endpoint to access it.
In the next step, you will learn how to deploy a different LLM.</p>
</li>
</ol>
<h3 id="deploy-second-model">Deploy second model<a class="headerlink" href="#deploy-second-model" title="Permanent link">¶</a></h3>
<p>In this section, IBM's Granite model is deployed.</p>
<div class="admonition info">
<p class="admonition-title">About IBM's Granite LLM</p>
<p>The IBM Granite model family is designed as enterprise-grade AI models tailored for business applications. Granite models are available both as open source models on platforms like Hugging Face and through IBM's watsonx.ai for more enterprise-specific needs.</p>
</div>
<ol>
<li>Navigate to your Red Hat OpenShift developer profile window. Click <strong>ConfigMaps</strong> <strong>(A)</strong>, then click <strong>model-params</strong> <strong>(B)</strong>. This opens up the ConfigMap details page.
   <a class="glightbox" href="https://github.com/user-attachments/assets/3f611c0a-e4b0-47fc-90e5-3fbedce627f3" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/3f611c0a-e4b0-47fc-90e5-3fbedce627f3"></a></li>
<li>In the model-params ConfigMap details page, click <strong>Action</strong> <strong>(A)</strong> and select <strong>Edit ConfigMap</strong> <strong>(B)</strong>.
   <a class="glightbox" href="https://github.com/user-attachments/assets/2e7d312c-fb9c-44a4-ae39-9c958b72403e" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/2e7d312c-fb9c-44a4-ae39-9c958b72403e"></a></li>
<li>
<p>In the resulting form, edit the key/value fields for MODEL_NAME and MODEL_URL as below and click <strong>Save</strong> <strong>(E)</strong>.</p>
<ul>
<li><strong>Key</strong>: <code>MODEL_NAME</code> <strong>(A)</strong></li>
<li><strong>Value</strong>: <code>granite-7b-lab.Q4_K_M.gguf</code> <strong>(B)</strong></li>
</ul>
<hr>
<ul>
<li><strong>Key</strong>: <code>MODEL_URL</code> <strong>(C)</strong></li>
<li><strong>Value</strong>: <code>https://huggingface.co/RichardErkhov/instructlab_-_granite-7b-lab-gguf/resolve/main/granite-7b-lab.Q4_K_M.gguf</code> <strong>(D)</strong></li>
</ul>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/9173fc4e-7dde-4afd-917b-aec289c42b5b" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/9173fc4e-7dde-4afd-917b-aec289c42b5b"></a></p>
</li>
<li>
<p>The existing pod cannot see the changes right away as changing values of a ConfigMap does not cause a deployment (and hence the pod) to restart. It needs to be done manually.</p>
</li>
<li>
<p>Click <strong>Topology</strong> <strong>(A)</strong>, then click "<strong>D lab1-demo</strong>" <strong>(B)</strong> part of the application icon, which opens the deployment details pane (on the right side of the browser window). Click <strong>D lab1-demo</strong> <strong>(C)</strong> in that pane which opens the deployment details view for lab1-demo deployment.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/26ab79ec-d0f2-4d58-a1d3-e744326b4b91" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/26ab79ec-d0f2-4d58-a1d3-e744326b4b91"></a></p>
</li>
<li>
<p>Click <strong>Actions</strong> <strong>(A)</strong> and select <strong>Restart rollout</strong> <strong>(B)</strong>. This restarts the deployment which results in the redeployment of the pod.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/b12bf560-6689-4002-8c34-2bb936ef5931" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/b12bf560-6689-4002-8c34-2bb936ef5931"></a></p>
</li>
<li>
<p>Click <strong>Pods</strong> <strong>(A)</strong> tab, where you see a new pod instantiated. The new pod downloads the model and then starts it. Since the configmap points to a Granite model, it is downloaded from HuggingFace and then started. When that happens the new pod's status changes to Running and the existing pod is terminated.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/5d1d9b22-dfcd-4c6a-91cf-fbfc4a8a3384" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/5d1d9b22-dfcd-4c6a-91cf-fbfc4a8a3384"></a></p>
<div class="admonition info">
<p class="admonition-title">Model download takes time</p>
<p>This process takes a few minutes (in this case that it took around 3-4 mins as it is a fairly large model compared to tinyllama) and your results might vary. Remember, this is a demo environment and the models are a few GBs in size. Models that are downloaded are not downloaded again if you are using the same storage (PV).</p>
</div>
</li>
<li>
<p>If the previous step is completed successfully, only one pod is running.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/854703df-2ca4-42ce-825c-30c49a94a050" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/854703df-2ca4-42ce-825c-30c49a94a050"></a></p>
</li>
<li>
<p>Verify that the model that is running is an IBM Granite model. Click the pod name <strong>(A)</strong> to enter the pod details view/page.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/4c7c0139-3920-413c-bb20-c8ddeeab6fa3" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/4c7c0139-3920-413c-bb20-c8ddeeab6fa3"></a></p>
</li>
<li>
<p>In the pod details page, click the <strong>Logs</strong> <strong>(A)</strong> tab to see the pod logs.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/4bec6d4d-8dd3-4b5f-823b-99342ca633a3" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/4bec6d4d-8dd3-4b5f-823b-99342ca633a3"></a></p>
</li>
<li>
<p>In the log window, scroll upwards to see the name of the model against the attribute <strong>llm_load_print_meta: general.name</strong>.</p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/5ca4f0b1-8655-41df-85d2-8d740627989c" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/5ca4f0b1-8655-41df-85d2-8d740627989c"></a></p>
<p>This verifies that the IBM Granite (granite-7b-lab) model is successfully deployed.   </p>
</li>
<li>
<p>Access the model by locating the external public endpoint, as demonstrated in the previous section of this lab. The beauty of Red Hat OpenShift is that the endpoint remains the same despite the pod being restarted. So, either you can refresh the earlier page (if you have it opened in the browser) or follow the steps below to access the public URL of your application by using the Topology view.</p>
<div class="admonition note">
<p class="admonition-title">Multiple ways to access the public URL of your application</p>
<p>If you are in the Administrator profile, you can navigate to <strong>Networking</strong> -&gt; <strong>Routes</strong> to access your route resource and click the URL to open your application. Alternatively, if you are in the Developer profile, you can go to <strong>Topology</strong> view and access the URL of your application as well, which is the method that is used here:</p>
</div>
<ul>
<li>In the Developer profile window, click <strong>Topology</strong> <strong>(A)</strong> and you see the icon representing your deployed application.
  <a class="glightbox" href="https://github.com/user-attachments/assets/4dd6037e-1bfd-49b6-b190-f0096aae28b4" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/4dd6037e-1bfd-49b6-b190-f0096aae28b4"></a></li>
<li>Click the arrow (at the upper right of the icon) <strong>(A)</strong> that says "Open URL".
  <a class="glightbox" href="https://github.com/user-attachments/assets/5b7ecd28-8491-4b37-b64d-629563c7ae82" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/5b7ecd28-8491-4b37-b64d-629563c7ae82"></a></li>
<li>A new browser window/tab where you are able to interact with your newly deployed LLM. You see a screen like this:
  <a class="glightbox" href="https://github.com/user-attachments/assets/2237409c-7160-471f-aafa-f0e1254c5a53" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/2237409c-7160-471f-aafa-f0e1254c5a53"></a></li>
<li>Scroll all the way down to the input field "Say something..." where you can interact with the LLM. You can ask any question that you like!
  <a class="glightbox" href="https://github.com/user-attachments/assets/82196cf5-d4c2-459d-af7e-c24650f1f6ce" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/82196cf5-d4c2-459d-af7e-c24650f1f6ce"></a></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Experimenting with model parameters</p>
<p>You can see numerous model parameters or tunables (for example: Predictions, Temperature, and so on). Visit the model-specific documentation and learn about them and experiment with it. You might want to change some parameters, ask the same question, and check how the response changes. These parameters are not covered in this lab as it is outside the scope of the lab.</p>
</div>
</li>
<li>
<p>Presented below are the questions and their corresponding responses.</p>
<div class="admonition warning">
<p class="admonition-title">Accuracy of LLM responses</p>
<ul>
<li>Large language models (LLMs) are trained on vast amounts of text data, but that training is limited to a <strong>specific cutoff date</strong>. It means that the model can answer questions based on the information available up to that point in time. It cannot access real-time data or understand events, trends, or new information that occurred after the cutoff date. Therefore, the knowledge on which they were trained limits their ability to provide accurate answers.</li>
<li>AI-generated content varies and does not always provide consistent answers. Your response might be different.</li>
</ul>
</div>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/4201cafb-9f11-4f82-945b-1f843713426e" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/4201cafb-9f11-4f82-945b-1f843713426e"></a></p>
<p><a class="glightbox" href="https://github.com/user-attachments/assets/e0a23318-e2bc-4778-8c12-84643a8f530c" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="https://github.com/user-attachments/assets/e0a23318-e2bc-4778-8c12-84643a8f530c"></a></p>
<p><strong>Well done!</strong> In this lab, you learned how straightforward it is to transition to a different LLM, access it, and use its capabilities.</p>
<p>This concludes the lab.</p>
</li>
</ol></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 IBM
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>